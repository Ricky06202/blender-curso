---
import capitulos from '../data/capitulos';

const path = Astro.url.pathname;
const match = path.match(/^\/capitulos\/(.+)$/);
const currentChapterId = match?.[1] ?? null;
const firstChapter = capitulos[0]?.id ?? 'introduccion';
const hrefCapitulos = `/capitulos/${currentChapterId ?? firstChapter}`;
const isHome = path === '/';
const isCapitulos = !!match;
---

<header class="sticky top-0 z-50 bg-white/80 backdrop-blur border-b border-slate-200">
  <div class="max-w-[1200px] mx-auto px-4 h-14 flex items-center justify-between">
    <a href="/" class="font-semibold tracking-tight">Blender: de cero a render</a>
    <nav class="flex items-center gap-4">
      <a class={`hover:text-slate-900 ${isHome ? 'text-slate-900 font-semibold' : 'text-slate-700'}`} href="/" aria-current={isHome ? 'page' : undefined}>Inicio</a>
      <a class={`hover:text-slate-900 ${isCapitulos ? 'text-slate-900 font-semibold' : 'text-slate-700'}`} href={hrefCapitulos} aria-current={isCapitulos ? 'page' : undefined}>Capítulos</a>
      <a class="inline-block px-3 py-1.5 rounded-md border border-slate-300 bg-white text-slate-900 hover:bg-slate-100 transition" href="#">Iniciar sesión</a>
    </nav>
  </div>
</header>
